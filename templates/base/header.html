
{% load i18n %}

<!-- TOP -->
<div id="top">
    <div id="header" class="main">
        <div class="logo">
            <a href="/">
                Logo
            </a>
        </div>
        <div id="main-menu">
            <ul class="main-menu-nav">
                <li>
                  <a href="/">{% trans 'Home' %}</a>
                </li>
                <li>
                  <a href="/browse">{% trans 'Browse All' %}</a>
                </li>
                <li>
                  <a href="#">{% trans 'Contribute' %}</a>
                </li>
                <li>
                  <a href="/about-us">{% trans 'About Us' %}</a>
                </li>
            </ul>
        </div>

        <!--RIGHT TOP-->
        <div id="right-top-nav" class="right">
            <div class="block-top-language">
                <ul class="list-right-top">
                    {% if not is_home %}
                    <li>
                        <form action="{% url 'search' %}" method="GET">
                          {% csrf_token %}
                            <input type="text" class="input-search-right-top" name="keyword" value="{{ keyword }}">
                        </form>
                    </li>
                    {% else %}
                    <li>&nbsp;</li>
                    {% endif %}

                    <li>
                        <div class="collapse navbar-collapse bs-js-navbar-collapse">
                            <ul>
                                <li>
                                    <form name="setLangVietnamese" action="/language/setlang/" method="POST">{% csrf_token %}
                                        <input name="next" type="hidden" value="{{ request.path }}" />
                                        <input type="hidden" name="language" value="vi" />
                                        <a href="#" onclick="document.setLangVietnamese.submit();return false;"><img src="{{ STATIC_URL }}images/vi.jpg" alt="Tiếng Việt" title="Tiếng Việt" /></a>
                                    </form>
                                </li>
                                <li>
                                    <form name="setLangEnglish" action="/language/setlang/" method="POST">{% csrf_token %}
                                        <input name="next" type="hidden" value="{{ request.path }}" />
                                        <input type="hidden" name="language" value="en" />
                                        <a href="#" onclick="document.setLangEnglish.submit();return false;"><img src="{{ STATIC_URL }}images/us.png" alt="English" title="English" /></a>
                                    </form>
                                </li>
                            </ul>
                        </div>
                    </li>

                    {% if user.is_authenticated %}
                    <li>
                        <div class="collapse navbar-collapse bs-js-navbar-collapse">
                            <ul class="nav navbar-nav">
                                <li class="dropdown loged-top-user">
                                    <a data-toggle="dropdown" class="dropdown-toggle" role="button" id="drop-top-language">
                                        <span class="logo-user-right-top left"></span>{{ user.username }}
                                        <span class="caret"></span>
                                    </a>
                                    <div aria-labelledby="drop-category-pd" role="menu" class="dropdown-menu">
                                        <ul class="dropdown-menu-language">
                                            <li>
                                                <a href="{% url 'user_dashboard' %}">{% trans 'Account View' %}</a>
                                            </li>
                                            <li>
                                                <a href="{% url 'logout' %}">{% trans 'Logout'%}</a>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </li>
                    {% else %}
                    <li>
                        <a href="/user/register">{% trans 'Register' %}</a>
                    </li>
                    <li>
                        <a class="btn-top-login" data-toggle="modal" data-target="#modal-user-login">{% trans 'Login' %}</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
        <!--END RIGHT TOP-->
    </div>
</div>
<!-- END TOP -->

{% if not user.is_authenticated %}
<!-- Modal -->
<div class="modal fade" id="modal-user-login" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-login">
    <div class="modal-content">
      <div class="modal-header padding-content-15">
        <h4 class="modal-title" id="myModalLabel">{% trans 'Login to VOER' %}</h4>
      </div>
      <form action="{% url 'authenticate' %}" method="POST" id="login-form">
        <div class="modal-body padding-content-15">
          {% csrf_token %}
          <input type="text" class="form-control" placeholder="Username" name="username">
          <input type="password" class="form-control" placeholder="Password" name="password">
          <ul class="list-user-login-tools">
              <li>
                  <label class="checkbox checkbox-user-tool">
                      <span class="icons">
                          <span class="first-icon fui-checkbox-unchecked"></span>
                          <span class="second-icon fui-checkbox-checked"></span>
                      </span>
                      <input type="checkbox" data-toggle="checkbox">
                      {% trans 'Remember me' %}
                  </label>
              </li>
              <li class="right">
                  <a href="{% url 'django.contrib.auth.views.password_reset' %}">{% trans 'Forgot your password ?' %}</a>
              </li>
          </ul>
          <button type="submit" class="btn btn-primary btn-login-submit">{% trans 'Login' %}</button>
        </div>
        <div class="modal-footer">
          <a class="btn-form-login-signup left" href="/user/register">{% trans "Don't have an account? Sign up for VOER" %}</a>

          <div class="alert-modal-login left padding-content-10 hidden"><!-- Add class 'hidden' to hide alert -->
              <span class="left">{% trans 'The username or password is incorrect.' %}</span>
          </div>
        </div>
      </form>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script>
(jQuery)(function($){
  $(document).on('click', '.btn-login-submit', function() {
    Voer.Helper.login();
    return false;
  });
});
</script>
{% endif %}
